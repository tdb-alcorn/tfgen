


def parse(mat):
    context_stack = list()
    contents = list()
    element = ''
    for c in mat:
        if c == '\n':
            continue
        elif c == '[':
            # push new row onto stack
            context_stack.append(list())
        elif c == ']':
            # pop row from context, copy existing contents to it and then add
            # it to the contents of current row
            # print('popping')
            # print('context_stack', context_stack)
            # print('contents', contents)
            # print('element', element)
            if element != '':
                contents.append(element)
                element = ''
            row = context_stack.pop()
            for elt in contents:
                row.append(elt)
            contents.clear()
            if len(context_stack) > 0:
                context_stack[-1].append(row)
            else:
                return row
            # print('row', row)
            # print('context_stack', context_stack)
            # print('contents', contents)
            # print('element', element)
        elif c == ' ':
            if element != '':
                contents.append(element)
                element = ''
        else:
            element += c
    print('context_stack', context_stack)
    print('contents', contents)
    print('element', element)
    raise Exception('unbalanced delimiters')



mat = '''
[[-1.06309116e+00  5.85751116e-01 -1.11588788e+00 -3.92785043e-01
   1.48188555e+00 -1.41271365e+00  7.54099667e-01 -3.14791888e-01
   7.43962407e-01 -9.04983163e-01]
 [ 3.76452804e-01 -2.93082714e-01  1.40408719e+00  1.72897112e+00
   5.61838269e-01 -4.75327641e-01 -1.01442504e+00 -7.53470004e-01
   2.03198600e+00  2.36356586e-01]
 [ 5.89075923e-01  3.16635668e-01  2.23521125e-02 -9.33331549e-01
  -7.19527185e-01  1.03973019e+00 -2.00598568e-01  2.60944456e-01
   5.59466779e-01  5.23032248e-01]
 [-4.28551286e-01  9.41279650e-01 -8.28811884e-01  1.46643651e+00
   9.98929560e-01 -1.69733837e-01 -6.16165638e-01 -1.64838243e+00
  -1.26221228e+00  5.83321676e-02]
 [ 6.41012132e-01  1.28287053e+00 -1.27001548e+00  1.35356486e+00
   6.24252617e-01 -2.14139428e-02 -2.11127687e+00  5.88215411e-01
  -8.37950826e-01  3.71619374e-01]
 [ 1.37015927e+00 -9.17902827e-01 -1.43584698e-01 -2.30502725e-01
   1.86819279e+00 -3.23994011e-01 -1.10929751e+00  1.12352633e+00
  -9.83662426e-01 -1.92068398e-01]
 [ 1.30168092e+00 -1.48651147e+00 -1.16681743e+00 -8.01573992e-01
  -1.05066824e+00 -9.04154599e-01  8.16863298e-01  6.88482285e-01
   3.36761743e-01  1.15198576e+00]
 [ 7.91315913e-01 -8.80692899e-01  6.53107107e-01 -4.56481934e-01
   1.62292767e+00  1.87299132e+00  6.79616690e-01 -9.21785086e-02
   6.73523664e-01 -3.43017548e-01]
 [-1.32816744e+00 -8.45941961e-01  1.29551923e+00 -3.65599841e-01
   1.08327544e+00 -1.09382463e+00 -1.49865651e+00 -6.95518613e-01
  -2.62287617e-01 -1.60635483e+00]
 [ 1.22478771e+00 -1.25808322e+00  5.28005183e-01  2.25133806e-01
   8.41010213e-01  8.42432499e-01  2.07465649e-01 -9.03626919e-01
   1.29804957e+00 -4.66328114e-01]
 [-8.99472952e-01  1.63456023e-01  5.24700582e-01  3.89422327e-01
  -6.21058941e-01  1.68225110e-01 -1.58248067e+00 -8.56544375e-01
   6.22379780e-01 -9.18658495e-01]
 [-6.83048189e-01  2.45667785e-01  1.26534355e+00  2.92409360e-01
  -1.00390959e+00  7.26069450e-01 -1.43576837e+00 -5.38369656e-01
   8.92674506e-01  8.25459719e-01]
 [-2.72432536e-01  9.28199410e-01 -7.45043993e-01 -9.08099234e-01
  -5.80232441e-01 -9.66797590e-01 -6.72283471e-01  1.81165850e+00
  -4.47413713e-01  7.43170917e-01]
 [-1.03981876e+00  1.55483961e+00 -3.04128051e-01  8.89857590e-01
  -1.50875583e-01 -1.18203092e+00 -4.29435745e-02 -4.89565879e-01
  -7.07044542e-01 -1.32017374e+00]
 [-1.03840339e+00 -5.85722327e-01  1.81350076e+00 -1.26341748e+00
  -2.51234937e+00  9.47434843e-01 -2.39021972e-01  6.41857311e-02
   2.05588117e-01 -5.06050527e-01]
 [-3.26709300e-01 -1.20247841e+00 -1.48406208e-01  4.98784035e-01
   5.78929245e-01 -5.36485156e-03 -1.76691520e+00 -1.12568521e+00
  -9.74032953e-02 -1.24043071e+00]
 [ 4.82686728e-01  4.10741307e-02  1.22242582e+00 -1.07575506e-01
  -6.11570835e-01  2.35628843e-01  4.24922317e-01  8.50997269e-01
   1.45644534e+00  3.14453512e-01]
 [-1.96272045e-01  2.26168346e+00 -2.28050277e-01 -8.45836282e-01
  -1.23988938e+00 -7.06471264e-01 -2.33990490e-01 -1.54007867e-01
  -5.54801464e-01 -8.01838875e-01]
 [ 4.78790402e-02  1.50628757e+00 -1.66305482e+00  5.91663480e-01
  -3.09424192e-01  1.65545535e+00 -7.09953845e-01  1.05996430e-01
  -4.96036798e-01 -1.55009076e-01]
 [-1.80211082e-01  1.96642113e+00 -1.61746576e-01 -4.76496786e-01
   4.77180362e-01 -1.01254009e-01  7.36461699e-01 -4.99912500e-01
  -6.03238761e-01 -6.52371645e-01]
 [ 1.35064733e+00 -1.20761466e+00 -8.97490457e-02  6.35959566e-01
  -1.22526085e+00  9.64275375e-02  1.12216806e+00  2.04396695e-01
  -1.68153867e-01  6.18282914e-01]
 [-9.85823691e-01 -8.32985491e-02  5.25449097e-01  1.04496980e+00
   2.51458496e-01 -7.54820824e-01 -1.36955929e+00  1.98890030e+00
   2.72301704e-01 -4.94320601e-01]
 [-1.74445927e-01 -8.77230465e-01  1.03578067e+00  4.79881793e-01
  -7.24814177e-01  2.49076223e+00 -1.57127392e+00  1.54123271e+00
  -3.46116722e-01 -9.95806158e-01]
 [-4.84001338e-01  5.83982244e-02  4.86039877e-01 -1.71548769e-01
   7.52665758e-01  1.28108844e-01  2.46589494e+00  2.60778874e-01
  -9.96162713e-01 -7.92248622e-02]
 [ 7.90733516e-01  2.18185101e-04 -7.75441170e-01 -1.75082490e-01
  -1.22188437e+00 -1.47878432e+00 -1.75909269e+00 -3.81853044e-01
   1.78561971e-01  1.39836800e+00]
 [ 4.89191592e-01  1.19009304e+00 -4.85735714e-01 -5.63929439e-01
  -9.48264241e-01  2.62789935e-01  1.98086369e+00  1.32881748e-02
  -9.78352547e-01 -8.76944125e-01]
 [-5.65255523e-01 -3.50615829e-01 -1.35011986e-01 -9.66343701e-01
  -9.02192354e-01 -7.69719422e-01  2.12975717e+00  2.31274590e-01
   5.69354951e-01  1.04777956e+00]
 [-7.53335118e-01 -1.59216416e+00 -3.99528742e-02  4.62006778e-01
  -1.47956085e+00  6.02066815e-01  1.23844934e+00  2.85341293e-01
  -8.78175080e-01 -7.77270377e-01]
 [ 8.98224831e-01  4.01010245e-01 -2.63623327e-01 -2.06804156e+00
  -9.30221379e-01 -1.35693014e-01  1.73820662e+00 -1.82390106e+00
  -1.34730291e+00 -1.31793189e+00]
 [-4.97337103e-01  2.33486757e-01  2.46657443e+00  8.34103703e-01
   1.49056941e-01 -8.84792209e-01  2.08957195e+00 -4.23175782e-01
  -8.85290384e-01 -4.87955689e-01]
 [ 1.35311261e-01 -1.30177832e+00 -1.18132365e+00 -5.22828341e-01
   1.53718495e+00 -3.30591321e-01 -7.92783871e-02 -1.22975171e-01
  -8.71728182e-01 -1.00241089e+00]
 [-9.91838336e-01  5.98865390e-01  8.89797866e-01 -5.94318748e-01
   7.10280240e-02  8.67781878e-01  2.42060900e-01 -8.53304446e-01
  -1.51194251e+00 -1.42064285e+00]
 [-9.78074312e-01  1.71364689e+00  1.84376168e+00  2.59039909e-01
   8.30881476e-01  1.33224642e+00  2.06655815e-01 -2.97497213e-01
   1.05705112e-01  2.90310597e+00]
 [ 8.58288050e-01 -2.17892095e-01  5.55589795e-01 -1.52410446e-02
  -1.46101788e-01  9.14531529e-01  6.59150243e-01  3.33603859e-01
  -1.43005490e+00 -7.26468861e-01]
 [ 1.13719702e+00 -4.12016362e-01 -6.19398773e-01  3.63589376e-01
   8.84791434e-01  9.33471978e-01  1.10790350e-01 -1.92042947e+00
   1.24760103e+00 -1.69763401e-01]
 [-1.41934764e+00  5.90928197e-01  6.00914061e-01  1.64243281e+00
  -3.65111542e+00  1.02095269e-01 -9.45864797e-01 -4.12632674e-02
  -6.96655214e-01 -6.29494011e-01]
 [ 3.21713597e-01  5.30256927e-01 -1.60316169e+00 -1.11308730e+00
   1.12714016e+00  3.20689566e-02 -2.09810868e-01 -9.57642555e-01
   1.17940891e+00  7.88407803e-01]
 [ 1.56231236e+00 -1.83141458e+00  1.10863268e+00  2.41274275e-02
  -1.88335669e+00  1.35702002e+00  1.64784718e+00 -1.29850894e-01
  -2.82777637e-01  3.43375206e-01]
 [ 1.57795966e-01 -1.56492487e-01 -2.35402107e+00 -5.00781201e-02
  -7.30107203e-02  1.49363995e+00  2.39195323e+00 -6.10860586e-01
   9.46027040e-01 -5.95121562e-01]
 [-1.13275445e+00 -1.77889514e+00 -9.83997956e-02  8.18419218e-01
  -3.81665766e-01  1.02512383e+00 -6.86810136e-01 -2.62451708e-01
  -9.08154070e-01  5.13955355e-01]
 [-6.75459087e-01 -3.48639578e-01  1.67053878e-01 -1.34195313e-01
   1.11094856e+00  4.83912647e-01  1.06008041e+00  7.88196683e-01
   1.73801053e+00  1.74582362e+00]
 [ 3.76175106e-01  4.44309786e-02  8.36071610e-01 -1.18296051e+00
  -1.12976933e+00 -1.59123468e+00 -1.07853927e-01 -1.91388416e+00
  -7.39019752e-01 -6.93781599e-02]
 [ 6.94402933e-01  1.51667923e-01 -3.41348909e-02 -1.34108096e-01
   8.22356999e-01 -2.80374140e-01 -1.20448732e+00  1.99558720e-01
  -9.31536973e-01  7.16550052e-01]
 [ 2.09689188e+00  2.91243881e-01 -7.44828284e-01 -1.08335924e+00
  -9.71100092e-01  1.83009720e+00 -1.06993043e+00  2.00885117e-01
  -1.17713606e+00  3.29908371e-01]
 [-5.05691409e-01  1.96103707e-01  2.94044197e-01 -9.69885826e-01
   1.23881435e+00 -8.84035587e-01  9.79003251e-01 -2.05742455e+00
   7.77817965e-01  6.04578674e-01]
 [-9.25957039e-02  1.65636301e+00  7.26088703e-01  3.43456954e-01
  -7.14891613e-01 -1.31394017e+00 -9.82704878e-01 -1.07805498e-01
  -1.56816292e+00  2.83147669e+00]
 [-7.68947482e-01 -9.46215272e-01 -1.99992359e-01  1.34304240e-01
   1.52250385e+00 -6.50506675e-01  1.01963460e+00  4.87251580e-01
  -1.59636497e+00 -8.34514201e-01]
 [-7.42287487e-02  2.37036079e-01 -2.77968287e-01  1.78677869e+00
   1.08709693e+00  4.32810992e-01  1.00511646e+00  2.13990712e+00
   2.15611327e-02 -1.21185398e+00]
 [ 7.98068643e-01  2.35284901e+00  8.89791489e-01 -1.94530356e+00
   1.60927963e+00  7.40247011e-01  3.60613793e-01  1.16702348e-01
  -1.11446381e+00 -1.64972019e+00]
 [-2.53929526e-01 -4.27659065e-01  2.94369489e-01  1.07986677e+00
  -8.54170442e-01  5.63224614e-01  1.59317875e+00 -1.36833131e+00
  -1.52555668e+00  2.63335314e-02]
 [ 1.25794256e+00  7.50722706e-01 -2.12197065e+00  1.25239983e-01
   1.65274803e-04 -2.41379514e-01 -1.27628720e+00  1.05915165e+00
   9.51861024e-01 -1.96223223e+00]
 [-8.03025126e-01  1.33234179e+00 -1.23480058e+00 -5.61501980e-02
   5.42585671e-01 -1.85261679e+00  1.74667954e+00 -6.72986388e-01
  -3.52703661e-01 -1.88565660e+00]
 [ 1.11364722e+00 -1.39123929e+00 -1.23304391e+00  4.19453263e-01
   9.04259682e-02  1.66006017e+00 -1.13301317e-03 -9.16449577e-02
   4.67507780e-01  1.62948680e+00]
 [ 9.55434442e-01 -5.14446974e-01 -6.40465021e-01 -2.05571318e+00
   4.01506603e-01  5.44912100e-01  3.24589938e-01 -9.02066231e-01
  -7.66708791e-01  8.19388211e-01]
 [-8.40404987e-01 -5.05032763e-02 -6.20500386e-01  5.06079257e-01
   5.80955669e-02 -8.12743247e-01  8.35352182e-01 -1.22334802e+00
  -9.17038620e-01  8.94395590e-01]
 [ 3.40416729e-01 -6.83934331e-01  1.14205277e+00 -5.72564185e-01
   6.14328310e-02 -2.76145399e-01  3.66342068e-01  7.14278877e-01
   1.13212809e-01 -4.11044955e-01]
 [-1.06938648e+00  8.91516358e-02  1.94954023e-01  6.78598702e-01
  -1.18967366e+00 -1.27819240e+00 -8.84654880e-01  2.15274528e-01
  -2.93881655e-01 -4.21661615e-01]
 [-1.64938056e+00  3.56598914e-01 -1.77388644e+00 -8.38644743e-01
  -1.65574455e+00 -4.64729458e-01 -1.95339155e+00  1.44958627e+00
   7.76648402e-01  5.80267251e-01]
 [ 7.16802835e-01 -5.03403664e-01  1.57004759e-01  3.14972579e-01
  -2.63022006e-01 -1.08617163e+00 -8.69624913e-01  3.75657767e-01
  -3.72867733e-01  6.98350966e-01]
 [ 9.81514156e-01 -1.24913350e-01  1.54707158e+00 -1.08863103e+00
   1.41243708e+00 -1.77113354e-01  9.52743709e-01  6.41670465e-01
   4.80440110e-02 -6.44783258e-01]
 [-7.88635969e-01  1.81561857e-02  3.65642190e-01  1.92508304e+00
  -9.34653640e-01  1.53099275e+00 -6.35664463e-01  1.23443067e+00
   2.49625996e-01 -5.54226398e-01]
 [ 9.82156217e-01  2.15280242e-02  1.16475606e+00  1.11492205e+00
  -4.58268225e-02 -3.65710594e-02 -6.53202832e-01 -4.93127584e-01
  -6.70697868e-01 -2.38942280e-01]
 [-3.08622569e-01  9.18648124e-01 -1.07028210e+00 -8.84181798e-01
   4.01690036e-01 -1.26435614e+00  1.66384518e+00 -3.43812525e-01
   2.88437176e-02 -5.54834008e-01]
 [ 2.89007139e+00  1.26321211e-01 -1.08719659e+00 -4.68435913e-01
  -1.82937825e+00  6.90464258e-01 -2.05491352e+00 -2.51871467e-01
   1.49337769e+00 -2.47866780e-01]]
'''


if __name__ == '__main__':
    result = parse(mat)
    print(len(result))
    print([len(row) for row in result])
    print(result)